<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>防抖函数</title>
</head>

<body>
  <h1>没有防抖函数</h1>
  <div
    id="box1"
    style="width: 400px;height: 300px;background-color: #000;color: #fff;text-align: center;line-height: 300px;font-size: 40px;">
    <span id="value1">0</span>
  </div>
  <h1>增加了防抖函数</h1>
  <div
    id="box2"
    style="width: 400px;height: 300px;background-color: #000;color: #fff;text-align: center;line-height: 300px;font-size: 40px;">
    <span id="value2">0</span>
  </div>
</body>
<script>
  /**
   * 实现函数防抖
   * 防抖函数是短时间内多次触发同一事件，只执行最后一次，或者只执行最开始的一次，中间的不执行。
   */
  function debounce(func, delay) {
    let timer;
    return function() {
      let that = this;
      let args = arguments;
      if (timer) {
        clearTimeout(timer);
      }
      timer = setTimeout(function(){
        func.apply(that, args);
      }, delay);
    }
  }
  /**
   * 验证代码
   */
  var value1 = 0;
  var value2 = 0;
  // 没有防抖
  document.getElementById('box1').onmousemove = function() {
    value1++;
    document.getElementById('value1').innerText = value1;
  }
  // 加了防抖
  document.getElementById('box2').onmousemove = debounce(function() {
    value2++;
    document.getElementById('value2').innerText = value2;
  }, 1000);

</script>

</html>