(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[34,275],{86923:function(L){L.exports={contextMenu:"contextMenu___b-WsM",show:"show___3yn-0",tabLabel:"tabLabel___3KEvX"}},68450:function(L,_,t){"use strict";t.r(_);var l=t(86582),v=t(67294),E=t(96700),O=t(34206),D=t(86427),i=function(r){var n=(0,v.useContext)(E.D),f=n.tabs,a=n.dispatch,e=r.children,y=r.route,c=r.location,P=function(){var A=(0,l.Z)(f),K=A.find(function($){return $.route.path===y.path}),I={route:y,location:c,children:e};K?(0,D.G)(K.location,c)&&A.splice(A.indexOf(K),1,I):A.push(I),a({type:O.O.UPDATE_TABS,payload:A})};return(0,v.useEffect)(P,[]),null};_.default=i},96700:function(L,_,t){"use strict";t.d(_,{D:function(){return r},z:function(){return n}});var l=t(2824),v=t(11849),E=t(67294),O=t(34206),D=t(85893),i={tabs:[],dispatch:function(){}};function s(f,a){var e=a.type,y=a.payload;switch(e){case O.O.UPDATE_TABS:return(0,v.Z)((0,v.Z)({},f),{},{tabs:y});default:return f}}var r=E.createContext(i);function n(f){var a=f.children,e=(0,E.useReducer)(s,i),y=(0,l.Z)(e,2),c=y[0],P=y[1];return c.dispatch=P,(0,D.jsxs)(r.Provider,{value:c,children:[" ",a," "]})}},34206:function(L,_,t){"use strict";t.d(_,{O:function(){return l}});var l;(function(v){v[v.UPDATE_TABS=0]="UPDATE_TABS"})(l||(l={}))},86427:function(L,_,t){"use strict";t.d(_,{F0:function(){return O},G4:function(){return D},G:function(){return i}});var l=t(93224),v=t(18446),E=t.n(v);function O(s){var r=s.pathname,n=s.hash,f=s.query,a=Object.entries(f).map(function(e){return e.join("=")}).join("&");return"".concat(r).concat(a).concat(n)}function D(s,r){return s===O(r)}function i(s,r){var n=s.key,f=s.search,a=(0,l.Z)(s,["key","search"]),e=r.key,y=r.search,c=(0,l.Z)(r,["key","search"]);if(a.query)for(var P in a.query)a.query[P]=String(a.query[P]);if(c.query)for(var p in c.query)c.query[p]=String(c.query[p]);return!E()(a,c)}},46984:function(L,_,t){"use strict";t.r(_),t.d(_,{default:function(){return tt}});var l=t(11849),v=t(86582),E=t(2824),O=t(18106),D=t(11029),i=t(67294),s=t(96700),r=t(34206),n=t(86427),f=t(86923),a=t.n(f),e=t(85893),y=function(o){var b=o.tab,T=o.position,j=o.history,R=o.handleTabClose,d=o.menuLabels,F=o.activeKey,G=(0,i.useContext)(s.D),N=G.tabs,z=G.dispatch,m=function(x){z({type:r.O.UPDATE_TABS,payload:x})},X=function(){!b||R((0,n.F0)(b.location),"remove")},Y=function(){if(!!b){var x=N.indexOf(b);if(!(x<0)){if(!(0,n.G4)(F,b.location)){var U=b.location,H=U.pathname,J=U.query,Q=U.hash;j.push({pathname:H,query:J,hash:Q})}m(N.slice(0,x+1))}}},M=function(){j.push("/"),m([])};return(0,e.jsxs)("ul",{className:"".concat(a().contextMenu," ").concat(b&&a().show),style:{left:T==null?void 0:T.x,top:T==null?void 0:T.y},children:[(0,e.jsx)("li",{onClick:X,children:(d==null?void 0:d.closeTab)||"Close Tab"}),(0,e.jsx)("li",{onClick:Y,children:(d==null?void 0:d.closeRightTabs)||"Close Tabs to The Right"}),(0,e.jsx)("li",{onClick:M,children:(d==null?void 0:d.closeAllTabs)||"Close All Tabs"})]})},c=y,P=t(21010),p=D.Z.TabPane,A=function(o){var b=(0,i.useState)(),T=(0,E.Z)(b,2),j=T[0],R=T[1],d=(0,i.useState)(),F=(0,E.Z)(d,2),G=F[0],N=F[1],z=(0,i.useContext)(s.D),m=z.tabs,X=z.dispatch,Y=(0,P.YB)(),M=o.location,S=o.defaultChildren,x=o.history,U=o.fixed,H=o.contextMenuLabels,J=(0,i.useMemo)(function(){return m.some(function(u){return(0,n.F0)(u.location)===(0,n.F0)(M)})},[M,m]),Q=(0,i.useCallback)(function(u){var h=m.find(function(V){return(0,n.F0)(V.location)===u});if(h&&!(0,n.G4)(u,M)){var C=h.location,B=C.query,W=C.pathname,Z=C.hash;x.push({pathname:W,query:B,hash:Z})}},[m,M,x]),q=function(h,C){if(C==="remove"){var B=m.findIndex(function(rt){return(0,n.F0)(rt.location)===h});if(B<0)return;var W;if((0,n.G4)(h,M)&&(W=m[B+1]||m[B-1]||{location:{pathname:"/"}}),W){var Z=W.location,V=Z.query,at=Z.pathname,ot=Z.hash;x.push({pathname:at,query:V,hash:ot})}var k=(0,v.Z)(m);k.splice(B,1),X({type:r.O.UPDATE_TABS,payload:k})}},et=function(h,C){h.preventDefault(),R(C),N({x:h.clientX,y:h.clientY})},nt=function(){function h(){R(void 0)}return document.addEventListener("click",h),function(){document.removeEventListener("click",h)}};return(0,i.useEffect)(nt,[]),(0,e.jsxs)("div",{className:U?"ant-page-tabs fixed":"ant-page-tabs",children:[(0,e.jsx)(D.Z,{className:"ant-page-tab-list",hideAdd:!0,type:"editable-card",onChange:Q,onEdit:q,activeKey:(0,n.F0)(M),children:m.map(function(u){return(0,e.jsx)(p,{tab:(0,e.jsx)("span",{onContextMenu:function(C){et(C,u)},className:a().tabLabel,children:u.route.title?Y.formatMessage({id:u.route.title,defaultMessage:u.route.name}):u.route.name}),children:u.children},(0,n.F0)(u.location))})}),!J&&S,(0,e.jsx)(c,{activeKey:(0,n.F0)(M),tab:j,position:G,history:x,handleTabClose:q,menuLabels:H})]})},K=function(o){var b=o.children,T=o.location,j=o.history,R=o.fixed,d=o.contextMenuLabels;return(0,e.jsx)(s.z,{children:(0,e.jsx)(A,{history:j,location:T,defaultChildren:b,fixed:R,contextMenuLabels:d})})},I=K,$=t(68450),w={closeTab:"\u5173\u95ED\u6807\u7B7E",closeRightTabs:"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E",closeAllTabs:"\u5173\u95ED\u6240\u6709\u6807\u7B7E"},tt=function(g){return g.location.pathname==="/user/login"?g.children:(0,e.jsx)(I,(0,l.Z)((0,l.Z)({},g),{},{fixed:!0,contextMenuLabels:w}))}}}]);
