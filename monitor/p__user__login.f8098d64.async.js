(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[53],{42081:function(B){B.exports={container:"container___2XU-J",lang:"lang___3UZBu",content:"content___232he",split:"split___1Ge3i",icon:"icon___1dSHb"}},81456:function(B,F,e){"use strict";e.r(F),e.d(F,{default:function(){return H}});var ae=e(18106),te=e(34792),S=e(48086),f=e(11849),h=e(3182),N=e(2824),ne=e(17462),b=e(76772),G=e(94043),u=e.n(G),M=e(89366),L=e(2603),O=e(29985),U=e(67294),E=e(45550),j=e(61132),R=e(16434),Z=e(21010);function X(p){return C.apply(this,arguments)}function C(){return C=(0,h.Z)(u().mark(function p(m){return u().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{success:!0,resultCode:"00000",data:{token:"qwertyuiopasdfghjklzxcvbnm",uid:"uid",name:"\u5C0F\u9F99",headimgurl:"https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png"}});case 2:case"end":return o.stop()}},p)})),C.apply(this,arguments)}function D(p,m){return I.apply(this,arguments)}function I(){return I=(0,h.Z)(u().mark(function p(m,g){return u().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,Z.WY)("/api/login/captcha",(0,f.Z)({method:"GET",params:(0,f.Z)({},m)},g||{})));case 1:case"end":return v.stop()}},p)})),I.apply(this,arguments)}var J=e(60923),V=e(42081),d=e.n(V),r=e(85893),W=function(m){var g=m.content;return(0,r.jsx)(b.Z,{style:{marginBottom:24},message:g,type:"error",showIcon:!0})},w=function(){var m=(0,U.useState)({}),g=(0,N.Z)(m,2),o=g[0],v=g[1],Y=(0,U.useState)("account"),z=(0,N.Z)(Y,2),$=z[0],se=z[1],A=(0,Z.tT)("@@initialState"),y=A.initialState,k=A.setInitialState,K=function(){var c=(0,h.Z)(u().mark(function n(){var i,s;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y==null||(i=y.fetchUserInfo)===null||i===void 0?void 0:i.call(y);case 2:if(s=a.sent,!s){a.next=6;break}return a.next=6,k(function(x){return(0,f.Z)((0,f.Z)({},x),{},{currentUser:s})});case 6:case"end":return a.stop()}},n)}));return function(){return c.apply(this,arguments)}}(),Q=function(){var c=(0,h.Z)(u().mark(function n(i){var s,l,a,x;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X((0,f.Z)({},i));case 3:if(s=t.sent,!s){t.next=16;break}return S.default.success("\u767B\u5F55\u6210\u529F\uFF01"),sessionStorage.setItem("user",JSON.stringify((0,f.Z)((0,f.Z)({},s.data),{},{access:"admin"}))),sessionStorage.setItem("token",s.data.token),t.next=10,K();case 10:if(Z.m8){t.next=12;break}return t.abrupt("return");case 12:return l=Z.m8.location.query,a=l,x=a.redirect,Z.m8.push(x||"/"),t.abrupt("return");case 16:v(s),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),S.default.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 22:case"end":return t.stop()}},n,null,[[0,19]])}));return function(i){return c.apply(this,arguments)}}(),q=o.status,_=o.type,T=J.Z,ee=T.title,P=T.subTitle,re=T.logo;return(0,r.jsx)("div",{className:d().container,children:(0,r.jsx)("div",{className:d().content,children:(0,r.jsxs)(E.Z,{logo:(0,r.jsx)("img",{alt:"logo",src:re}),title:ee,subTitle:P,initialValues:{autoLogin:!0},onFinish:function(){var c=(0,h.Z)(u().mark(function n(i){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Q(i);case 2:case"end":return l.stop()}},n)}));return function(n){return c.apply(this,arguments)}}(),children:[(0,r.jsx)("div",{className:P?null:d().split}),$==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{name:"mobile",fieldProps:{size:"large",prefix:(0,r.jsx)(M.Z,{className:d().prefixIcon})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(j.Z.Password,{name:"passWd",fieldProps:{size:"large",prefix:(0,r.jsx)(L.Z,{className:d().prefixIcon})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),q==="error"&&_==="mobile"&&(0,r.jsx)(W,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),$==="mobile"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(O.Z,{className:d().prefixIcon})},name:"mobile",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(R.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(L.Z,{className:d().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(n,i){return n?"".concat(i," \u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var c=(0,h.Z)(u().mark(function n(i){var s;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D({phone:i});case 2:if(s=a.sent,s!==!1){a.next=5;break}return a.abrupt("return");case 5:S.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01");case 6:case"end":return a.stop()}},n)}));return function(n){return c.apply(this,arguments)}}()})]})]})})})},H=w}}]);
