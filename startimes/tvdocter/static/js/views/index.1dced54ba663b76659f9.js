webpackJsonp([2],{"+EZU":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"header"},[t._v("自助诊疗")]),t._v(" "),a("div",{staticClass:"body",staticStyle:{background:"url('../static/bg.jpg')"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"row clearfix"},[a("div",{staticClass:"label"},[t._v("患者选择")]),t._v(" "),a("div",{staticClass:"input change-type"},[a("div",{staticClass:"value",class:{active:"type"==t.current},domProps:{innerHTML:t._s(t.type?"代述":"自己")}})])]),t._v(" "),a("div",{staticClass:"row clearfix"},[a("div",{staticClass:"label"},[t._v("性别")]),t._v(" "),a("div",{staticClass:"input change-type"},[a("div",{staticClass:"value",class:{active:"sex"==t.current},domProps:{innerHTML:t._s(t.sex?"女":"男")}})])]),t._v(" "),a("div",{staticClass:"row clearfix"},[a("div",{staticClass:"label"},[t._v("出生日期")]),t._v(" "),a("div",{staticClass:"input select-type"},[a("div",{staticClass:"value",class:{active:"birthdate"==t.current},domProps:{innerHTML:t._s(t.birthdate)}})])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"button",class:{active:"button"==t.current}},[t._v("开始诊断")])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"birthdate"===t.now,expression:"now==='birthdate'"}],staticClass:"birthdate-select"},[a("div",{staticClass:"birthdate-body"},[a("div",{staticClass:"year"},[a("div",{staticClass:"title",class:{active:"year"==t.birthdateCurrent}},[t._v("年")]),t._v(" "),a("ul",{staticClass:"content"},[t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.year-6+e)}})}),t._v(" "),a("li",{staticClass:"active",domProps:{innerHTML:t._s(t.year)}}),t._v(" "),t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.year+e<=t.maxYear?t.year+e:"")}})})],2)]),t._v(" "),a("div",{staticClass:"month"},[a("div",{staticClass:"title",class:{active:"month"==t.birthdateCurrent}},[t._v("月")]),t._v(" "),a("ul",{staticClass:"content"},[t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.month-6+e>0?t.month-6+e:"")}})}),t._v(" "),a("li",{staticClass:"active",domProps:{innerHTML:t._s(t.month)}}),t._v(" "),t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.month+e<=12?t.month+e:"")}})})],2)]),t._v(" "),a("div",{staticClass:"day"},[a("div",{staticClass:"title",class:{active:"day"==t.birthdateCurrent}},[t._v("日")]),t._v(" "),a("ul",{staticClass:"content"},[t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.day-6+e>0?t.day-6+e:"")}})}),t._v(" "),a("li",{staticClass:"active",domProps:{innerHTML:t._s(t.day)}}),t._v(" "),t._l(5,function(e){return a("li",{domProps:{innerHTML:t._s(t.day+e<=t.maxDay?t.day+e:"")}})})],2)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.qrcode,expression:"qrcode"}],staticClass:"birthdate-select"},[a("div",{staticClass:"code-result",domProps:{innerHTML:t._s(t.qrcodeResult)}}),t._v(" "),a("div",{attrs:{id:"code"}},[a("img",{attrs:{src:t.codeDataUrl,width:"250px",height:"250px"}})])]),t._v(" "),t.debug?a("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"error"},[t._v("\r\n    "+t._s(t.errorMessage)+"\r\n  ")]):t._e()])},i=[],n={render:s,staticRenderFns:i};e.a=n},"0jG4":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o});var s=a("oAV5"),i=a("VsUZ"),n=a.n(i),r=function(t,e,a){Object(s.d)(n.a.baseUrl+n.a.addCase+"?"+Object(s.c)(t),{},"POST",e,a)},o=function(t,e,a){Object(s.d)(n.a.baseUrl+n.a.getInquiryRecord+"?"+Object(s.c)(t),{},"POST",e,a)}},"4cq7":function(t,e){},"4u6v":function(t,e,a){"use strict";function s(t){a("4cq7")}var i=a("bIbA"),n=a("+EZU"),r=a("VU/8"),o=s,c=r(i.a,n.a,!1,o,null,null);e.a=c.exports},Oqbq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("4u6v"),n=new s.a({el:"#app",render:function(t){return t(i.a)}});s.a.use({app:n})},VsUZ:function(t,e){t.exports={baseUrl:window.baseUrl||"",addCase:"/fushionbaby-app/inquiry/addCase",getInquiryRecord:"/fushionbaby-app/inquiry/getInquiryRecord"}},bIbA:function(t,e,a){"use strict";var s=a("mvHQ"),i=a.n(s),n=a("oAV5"),r=a("0jG4"),o=a("71e1"),c=a.n(o),h=null,d=new Date;e.a={data:function(){return{debug:!0,errorMessage:"",type:0,sex:0,birthdate:"",current:"type",now:"main",list:["type","sex","birthdate","button"],year:d.getFullYear(),month:d.getMonth()+1,day:d.getDay(),maxYear:d.getFullYear(),maxDay:31,birthdateCurrent:"year",qrcode:!1,qrcodeResult:"等待连接",codeDataUrl:""}},created:function(){var t=this,e=this.month<10?"0"+this.month:this.month,a=this.day<10?"0"+this.day:this.day;this.birthdate=this.year+"-"+e+"-"+a,this.sid=Object(n.b)("sid"),document.onkeydown=function(e){t.changeKey(e.which)}},methods:{changeKey:function(t){var e=this.list.indexOf(this.current);switch(t){case 38:"main"===this.now?this.mainUp(e):"birthdate"===this.now&&this.birthdateUp();break;case 40:"main"===this.now?this.mainDown(e):"birthdate"===this.now&&this.birthdateDown();break;case 39:"main"===this.now&&"birthdate"===this.current?this.now="birthdate":"main"===this.now?this.mainChange():"birthdate"===this.now&&this.birthdateChange("right");break;case 37:"main"===this.now?this.mainChange():"birthdate"===this.now&&this.birthdateChange("left");break;case 13:if("birthdate"===this.now){var a=this.month<10?"0"+this.month:this.month,s=this.day<10?"0"+this.day:this.day;this.birthdate=this.year+"-"+a+"-"+s,this.now="main"}else if("main"===this.now&&"birthdate"===this.current)this.now="birthdate";else if("main"===this.now&&"button"===this.current){var o=this;Object(r.a)({sid:this.sid,sex:this.sex,birthdate:this.birthdate,type:this.type},function(t){var e="string"==typeof t?JSON.parse(t):t;"0"===e.responseCode?(localStorage.setItem("casecode",e.data.casecode),localStorage.setItem("sessionid",e.data.sessionid),localStorage.setItem("localDate",Object(n.a)()),c.a.toDataURL(i()({casecode:e.data.casecode,sessionid:e.data.sessionid}),function(t,e){t?o.errorMessage="生成二维码失败："+t:(o.codeDataUrl=e,o.qrcode=!0,o.getResult())})):o.errorMessage="请求结果返回错误，结果为："+i()(e)},function(t){o.errorMessage="请求服务器错误，错误日志为："+t})}}},mainUp:function(t){t>0&&(this.current=this.list[t-1])},mainDown:function(t){t<3&&(this.current=this.list[t+1])},mainChange:function(){"type"===this.current?this.type=this.type?0:1:"sex"===this.current&&(this.sex=this.sex?0:1)},birthdateUp:function(){switch(this.birthdateCurrent){case"year":this.year=this.year-1;break;case"month":this.month=this.month>1?this.month-1:this.month,this.maxDay=new Date(this.year,this.month,0).getDate(),this.day=this.day>this.maxDay?this.maxDay:this.day;break;case"day":this.day=this.day>1?this.day-1:this.day}},birthdateDown:function(){switch(this.birthdateCurrent){case"year":this.year=this.year<this.maxYear?this.year+1:this.year;break;case"month":this.month=this.month<12?this.month+1:this.month,this.maxDay=new Date(this.year,this.month,0).getDate(),this.day=this.day>this.maxDay?this.maxDay:this.day;break;case"day":this.day=this.day<this.maxDay?this.day+1:this.day}},birthdateChange:function(t){"year"===this.birthdateCurrent?this.birthdateCurrent="left"===t?"year":"month":"month"===this.birthdateCurrent?this.birthdateCurrent="left"===t?"year":"day":"day"===this.birthdateCurrent&&(this.birthdateCurrent="left"===t?"month":"day")},getResult:function(){var t=localStorage.getItem("sessionid"),e=localStorage.getItem("casecode"),a=this;h=setInterval(function(){Object(r.b)({sessionid:t,casecode:e,localDate:""},function(t){var e="string"==typeof t?JSON.parse(t):t;"0"===e.responseCode?"star"!==e.data.finish&&"finish"!==e.data.finish||(a.qrcodeResult="设备已连接",location.href="./result.html"):a.errorMessage="请求结果返回错误，结果为："+i()(e)},function(t){a.errorMessage="请求服务器错误，错误日志为："+t})},3e3),setTimeout(function(){clearInterval(h),a.qrcode=!1},3e5)}}}},oAV5:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"c",function(){return c});var s=a("mvHQ"),i=(a.n(s),a("vLgD")),n=function(t,e,a,s,n){i.a.ajax({url:t,data:e,method:a,dataType:"json",success:function(t){s&&s(t)},error:function(t){n&&n(t)}})},r=function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},o=function(t){var e=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[""];return e.length>1?decodeURIComponent(e[1].replace(/\+/g,"%20"))||null:""},c=function(t){if(t&&t instanceof Object){var e=[];for(var a in t)if(t.hasOwnProperty(a)){if("token"===a)continue;"function"==typeof t[a]&&(t[a]=t[a]()),null===t[a]&&(t[a]=""),e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]))}return e.join("&")}return t}},vLgD:function(t,e,a){"use strict";function s(t){function e(){}function a(t){if(t&&t instanceof Object){var e=[];for(var a in t)if(t.hasOwnProperty(a)){if("token"===a)continue;"function"==typeof t[a]&&(t[a]=t[a]()),null===t[a]&&(t[a]=""),e.push(escape(a)+"="+escape(t[a]))}return e.join("&")}return t}var s={url:"",sync:!0,method:"GET",data:null,username:null,password:null,dataType:null,success:e,error:e,timeout:0};for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i]);var r={script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},o=null,c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){c.onreadystatechange=e,clearTimeout(o);var t,a;if(c.status>=200&&c.status<300||304===c.status||0===c.status){if("arraybuffer"===c.responseType||"blob"===c.responseType)t=c.response;else{t=c.responseText,a=s.dataType?s.dataType:c.getResponseHeader("content-type").split("",1)[0];for(var i in r)r.hasOwnProperty(i)&&r[i].indexOf(a)>-1&&(a=i);try{"script"===a?console.log("不允许执行script代码"):"xml"===a?t=c.responseXML:"json"===a&&(t=""===t.trim()?null:JSON.parse(t))}catch(t){s.error(t,c),c.abort()}}s.success(t,c)}else s.error(c.statusText,c)}},"GET"===s.method&&(s.url=s.url+"?"+a(s.data)),c.open(s.method,s.url,s.sync,s.username,s.password),s.timeout>0&&(o=setTimeout(function(){c.onreadystatechange=e,c.abort(),s.error("timeout",c)},s.timeout)),c.send("POST"===s.method?n()(s.data):a(s.data))}var i=a("mvHQ"),n=a.n(i);e.a={ajax:s}}},["Oqbq"]);